<div class="pb-layout-contents">
    <!-- navi -->
    <!--
        navi 클릭시 is-selected 추가
        navi 확대시 type-open 추가
    -->


    <prep-detail-lnb [workflowType]="false"></prep-detail-lnb>


    <!-- wrap contents -->
    <div class="pb-wrap-contents">
        <!-- top -->
        <div class="pb-contents-top">
            <!-- right -->
            <div class="pb-ui-buttons">
                <a href="javascript:;" class="pb-component-btn type-line" (click)="confirmDelete($event, dataset)">DELETE</a>

                <a href="javascript:;" class="pb-component-btn type-line" (click)="downloadDataset()">DOWNLOAD</a>


                <div class="pb-ui-part" *ngIf="dataset != null && dataset.importType">
                    <a href="javascript:;" class="pb-component-btn type-bg" (click)="createNewFlow()" *ngIf="dataset != null && dataset.importType"><em class="pb-icon-add-r"></em>CREATE DATAFLOW</a>
                </div>
            </div>
            <!-- //right -->
            <!-- txt navi -->
            <div class="pb-txt-navi">
                <a href="javascript:;" class="pb-btn-back" (click)="onClickPrev()"></a>
                {{datasetName}}
            </div>
            <!-- //txt navi -->

        </div>
        <!-- //top -->

        <!-- contents -->
        <div class="pb-wrap-box-contents">
            <!-- box -->
            <div class="pb-box-contents dataset-type">

                <div class="ddp-wrap-datadetail">
                    <!-- left -->
                    <div class="ddp-info-left">
                        <!-- datadetail -->
                        <div class="ddp-ui-datadetail">
                            <label class="ddp-label-detail">INFORMATION</label>
                            <table class="ddp-table-detail ">
                                <colgroup>
                                    <col width="92px">
                                    <col width="*">
                                </colgroup>
                                <tbody>
                                <tr *ngFor="let item of datasetInformationList">
                                    <th>
                                        {{item.name}}
                                    </th>

                                    <!--<a href="javascript:" *ngIf="dataset.importType === ImportType.UPLOAD || dataset.importType === ImportType.URI; else notUpload" (click)="downloadDataset()">-->
                                        <!--{{item.value}}-->
                                    <!--</a>-->

                                    <td [ngClass]="{'ddp-link-url': (item.name === 'URI' && dataset.importType === ImportType.UPLOAD) || (item.name === 'URI' && dataset.importType === ImportType.URI)}">
                                        <div class="ddp-txt-cut" *ngIf="item.name === 'URI'; else notURI" title="{{item.value}}" >
                                            <a href="javascript:;" *ngIf="dataset.importType === ImportType.UPLOAD || dataset.importType === ImportType.URI; else notUpload" (click)="downloadDatasetForFile()">
                                                {{item.value}}
                                            </a>
                                            <ng-template #notUpload>
                                                {{item.value}}
                                            </ng-template>
                                        </div>
                                        <ng-template #notURI>
                                            {{item.value}}
                                        </ng-template>
                                    </td>

                                </tr>

                                </tbody>

                            </table>
                            <!-- rule -->
                            <div class="ddp-wrap-rules-flow ddp-snapshot" *ngIf="dataset != null && dataset.dsType === dsType.WRANGLED">

                                <!-- title -->
                                <div class="ddp-box-title">
                                    <em class="ddp-data-num">{{dataset.transformRules.length}}</em>
                                    {{'msg.dp.ui.rule.list' | translate}}
                                </div>
                                <!-- //title -->

                                <div class="ddp-ui-rule-flow">
                                    <ul class="ddp-list-rule2">
                                        <li *ngFor="let rule of ruleList; let idx = index">
                                                <span class="ddp-data-type">
                                                    <em class="ddp-ui-round">{{rule.alias}}</em>
                                                    <!--Header-->
                                                </span>
                                            <div class="ddp-ui-code" title="{{idx !== 0 ? rule.ruleString : null}}">
                                                {{rule.shortRuleString}}
                                            </div>

                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!-- //rule -->
                        </div>
                        <!-- //datadetail -->

                    </div>
                    <!-- //left -->
                    <!-- right -->
                    <div class="ddp-info-right">
                        <!-- datadetail -->
                        <div class="ddp-ui-datadetail">
                            <label class="ddp-label-detail">DATA</label>

                            <div class="ddp-form-box" [ngStyle]="getGridStyle()">
                            <!--<div class="pb-grid-area" [ngStyle]="getGridStyle()">-->
                                <div grid-component style="width:100%; height:100%;"></div>
                            </div>
                        </div>
                        <!-- //datadetail -->



                        <!-- datadetail -->
                        <div class="ddp-ui-datadetail">
                            <label class="ddp-label-detail">
                                USED IN
                            </label>
                            <div class="ddp-data-none" *ngIf="dataset==null || dataset.dataflows == null || dataset.dataflows.length == 0">No log</div>
                            <ul class="ddp-list-detail" *ngIf="dataset!=null && dataset.dataflows != null && dataset.dataflows.length > 0">


                                <li *ngFor="let item of dataset.dataflows; let index = index">
                                    <span class="ddp-box-tag2" *ngIf="index == 0">Created in</span>

                                    <!-- data -->
                                    <div class="ddp-wrap-detailinfo">
                                        <div class="ddp-wrap-detaildata">
                                            <span class="ddp-data-num"><em class="ddp-icon-dbdata-s"></em>{{item.wrangledDsCount}}+</span>
                                            <span class="ddp-data-num"><em class="ddp-icon-imported-s"></em>{{item.importedDsCount}}+</span>
                                        </div>

                                        <div class="ddp-data-by2">
                                            <!--{{'msg.common.ui.updated' | translate: { modifiedTime : item.modifiedTime | mdate:'YYYY-MM-DD HH:mm'} }}-->
                                            {{item.modifiedTime | mdate:'YYYY.MM.DD'}} <em class="ddp-icon-by">by</em>
                                            {{item.modifiedBy}}



                                            <!--2015. 01. 01 <em class="ddp-icon-by">by</em> 오상식-->
                                        </div>
                                    </div>
                                    <!-- //data -->
                                    <!-- 플로우 설명 이름 -->
                                    <div class="ddp-wrap-detailname">
                                        <span class="ddp-data-detailname">{{item.dfName}}</span> <span class="ddp-data-summary">- {{item.dfDesc}}</span>
                                    </div>
                                    <!-- //플로우 설명 이름 -->




                                    <!-- WRANGLED -->
                                    <div class="pb-wrap-button" *ngIf="dataset != null && !dataset.importType">
                                        <a href="javascript:;" class="pb-component-btn type-dark" (click)="goDetailNavigate(item.dfId)">
                                        <em class="pb-icon-move"></em></a>
                                    </div>
                                    <!-- // WRANGLED -->

                                </li>


                            </ul>
                        </div>
                        <!-- //datadetail -->





                    </div>
                    <!-- //right -->

                </div>
            </div>
            <!-- //box -->

        </div>

        <!-- //contents navi -->
    </div>
    <!-- //wrap contents -->
</div>