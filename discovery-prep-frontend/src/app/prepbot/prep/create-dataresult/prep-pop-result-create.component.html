<div class="pb-layout-popup" *ngIf="datasetId !=null">
    <!-- box popup -->
    <div class="pb-box-popup">
        <a href="javascript:;" class="pb-btn-pop-close" (click)="close()"></a>

        <!-- top -->
        <div class="pb-popup-top pb-clear">
            <div class="pb-txt-title">CREATE DATA RESULT</div>

        </div>
        <!-- //top -->
        <!-- contents -->
        <div class="pb-popup-contents ">
            <div class="pb-wrap-connect type-connect">

                <!-- upload -->
                <div class="pb-wrap-upload type-result">
                    <div class="pb-form-create type-result">
                        <div class="pb-create-label">Result Name</div>
                        <div class="pb-form-edit">
                            <input type="text" class="pb-component-input" placeholder="{{ 'msg.dp.ui.ss-name' | translate }}" [(ngModel)]="snapshot.ssName" maxlength="50"
                                   (keyup)="changeSSUri()"
                                   (keydown)="ssNameKeyDown()">
                        </div>
                    </div>

                    <div class="pb-form-create type-result">
                        <div class="pb-create-label">Result Type</div>
                        <div class="pb-form-edit">
                            <label class="pb-compomnent-radio">
                                <input type="radio" checked="{{firstLoading}}" (change)="changeSsType(SsType.URI)" name="snapshotFormatRadio">
                                <i></i>
                                <span class="pb-txt-radio">{{'msg.dp.ui.file-system' | translate }}</span>
                            </label>
                            <label class="pb-compomnent-radio">
                                <input type="radio" (change)="changeSsType(SsType.DATABASE)" name="snapshotFormatRadio">
                                <i></i>
                                <span class="pb-txt-radio">DB</span>
                            </label>
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">Data Connection</div>
                        <div class="pb-form-edit">
                            <div class="pb-component-selectbox is-value" (clickOutside)="isLocationListShow =false">
                                <span class="pb-txt-selectbox" *ngIf="fileLocations.length == 0">
                                    No data
                                </span>

                                <span class="pb-txt-selectbox" (click)="isLocationListShow = true" *ngIf="fileLocations.length > 0">
                                    {{fileLocations[locationSelectedIndex].label}}
                                </span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isLocationListShow" [style.display]="'block'">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let location of fileLocations">
                                            <a href="javascript:;" (click)="onSelected(location,'location')">
                                                {{location.label}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">Table</div>
                        <div class="pb-form-edit">
                            <div class="pb-component-selectbox is-value" (clickOutside)="isLocationListShow =false">
                                <span class="pb-txt-selectbox" *ngIf="fileLocations.length == 0">
                                    No data
                                </span>

                                <span class="pb-txt-selectbox" (click)="isLocationListShow = true" *ngIf="fileLocations.length > 0">
                                    {{fileLocations[locationSelectedIndex].label}}
                                </span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isLocationListShow" [style.display]="'block'">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let location of fileLocations">
                                            <a href="javascript:;" (click)="onSelected(location,'location')">
                                                {{location.label}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">{{'msg.dp.ui.location' | translate }}</div>
                        <div class="pb-form-edit" (clickOutside)="isLocationListShow =false">
                            <label class="pb-compomnent-radio" *ngFor="let location of fileLocations">
                                <input type="radio" name="fileLocationRadio" checked="{{firstLoading}}" (click)="onSelected(location,'location')" >
                                <i></i>
                                <span class="pb-txt-radio">{{location.label}}</span>
                            </label>
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">File format</div>
                        <div class="pb-form-edit" (clickOutside)="isLocationListShow =false">
                            <label class="pb-compomnent-radio" *ngFor="let formatitem  of fileFormat">
                                <input type="radio" name="fileLocationRadio" checked="{{firstLoading}}" (click)="onSelected(formatitem,'format')" >
                                <i></i>
                                <span class="pb-txt-radio">{{formatitem.label}}</span>
                            </label>
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">{{ 'msg.dp.ui.file-url' | translate }}</div>
                        <div class="pb-form-edit">
                            <input type="text" class="pb-component-input"
                            [(ngModel)]="snapshot.storedUri"
                            (ngModelChange)="onChangeStoredUri($event)"
                            (keydown)="fileUriKeyDown()">
                        </div>
                    </div>

                    <!--is-selected-->
                    <div class="pb-box-setting" [ngClass]="{ 'is-selected' : isAdvancedPrefOpen }" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-box-fold pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.ss.etl-engine' | translate}}</div>
                                <div class="pb-form-edit type-radio" style="width:600px;">
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" checked="{{firstLoading}}" (change)="changeEtlEngine(Engine.EMBEDDED)" name="EtlEngineRadio">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.embedded' | translate }}</span>
                                    </label>
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" [disabled]="false===isSparkEnabled()" (change)="changeEtlEngine(Engine.SPARK)" name="EtlEngineRadio">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.spark' | translate }}</span>
                                    </label>
                                </div>
                            </div>
                            <!-- //setting edit -->
                            <a href="javascript:" class="pb-btn-setting" (click)="toggleAdvancedSettingBtn()">Advanced setting</a>
                        </div>
                        <!-- //box setting -->

                        <!--<div class="pb-setting-sub pb-clear">-->
                            <!--&lt;!&ndash; setting edit &ndash;&gt;-->
                            <!--<div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">-->
                                <!--<div class="pb-edit-label">{{'msg.dp.th.file-format' | translate}}</div>-->
                                <!--<div class="pb-form-edit" style="width:600px;">-->

                                    <!--<div class="pb-component-selectbox is-value" (clickOutside)="isFormatListShow =false">-->
                                        <!--<span class="pb-txt-selectbox" *ngIf="uriFileFormat == null">No data</span>-->
                                        <!--<span class="pb-txt-selectbox" (click)="isFormatListShow = true" *ngIf="uriFileFormat != null">{{uriFileFormat}}</span>-->
                                        <!--&lt;!&ndash; popup &ndash;&gt;-->
                                        <!--<div class="pb-select-popup" *ngIf="isFormatListShow" [style.display]="'block'">-->
                                            <!--<ul class="pb-list-selectbox">-->
                                                <!--<li *ngFor="let formatitem  of fileFormat">-->
                                                    <!--<a href="javascript:;" (click)="onSelected(formatitem,'format')">-->
                                                        <!--{{formatitem.label}}-->
                                                    <!--</a>-->
                                                <!--</li>-->
                                            <!--</ul>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <!--&lt;!&ndash; //setting edit &ndash;&gt;-->
                            <!--</div>-->
                        <!--</div>-->

                        <!--<div class="pb-setting-sub pb-clear">-->
                            <!--&lt;!&ndash; setting edit &ndash;&gt;-->
                            <!--<div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">-->
                                <!--<div class="pb-edit-label">{{ 'msg.dp.ui.file-url' | translate }}</div>-->
                                <!--<div class="pb-form-edit" style="width:600px;">-->
                                    <!--<input type="text" class="pb-component-input"-->
                                           <!--[(ngModel)]="snapshot.storedUri"-->
                                           <!--(ngModelChange)="onChangeStoredUri($event)"-->
                                           <!--(keydown)="fileUriKeyDown()">-->
                                <!--</div>-->
                                <!--&lt;!&ndash; //setting edit &ndash;&gt;-->
                            <!--</div>-->
                        <!--</div>-->


                    </div>





                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.STAGING_DB">
                        <div class="pb-create-label">{{'msg.dp.th.db-name' | translate}}</div>
                        <div class="pb-form-edit">
                            <!-- selectbox -->
                            <div class="pb-component-selectbox is-value" (clickOutside)="isDbListShow =false">
                                <span class="pb-txt-selectbox" *ngIf="dbList ==null || dbList.length == 0">No data</span>
                                <span class="pb-txt-selectbox" (click)="isDbListShow=true" *ngIf="dbList != null && dbList.length > 0">{{snapshot['dbName']}}</span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isDbListShow" [style.display]="'block'" style="z-index:1001;">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let db of dbList">
                                            <a href="javascript:;" (click)="onSelectedDBName(db, dbList)">
                                                {{db}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>




                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.STAGING_DB">
                        <div class="pb-create-label">{{'msg.dp.th.tbl-name' | translate}}</div>
                        <div class="pb-form-edit">
                            <!--<div class="pb-component-selectbox is-value" (clickOutside)="isDbListShow =false">-->
                                <!--&lt;!&ndash; //popup &ndash;&gt;-->
                            <!--</div>-->
                            <!-- //selectbox -->
                            <input type="text" class="pb-component-input" placeholder="{{'msg.dp.th.tbl-name.ph' | translate}}"
                                   (keydown)="tblNameKeyDown()"
                                   [(ngModel)]="snapshot.tblName" maxlength="30">
                        </div>
                    </div>



                    <!--is-selected-->
                    <div class="pb-box-setting" [ngClass]="{ 'is-selected' : isAdvancedPrefOpen }" *ngIf="snapshot.ssType && snapshot.ssType === SsType.STAGING_DB">
                        <div class="pb-box-fold pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.ss.etl-engine' | translate}}</div>
                                <div class="pb-form-edit type-radio" style="width:600px;">
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" checked="{{firstLoading}}" (change)="changeEtlEngine(Engine.EMBEDDED)" name="EtlEngineRadio">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.embedded' | translate }}</span>
                                    </label>
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" [disabled]="false===isSparkEnabled()" (change)="changeEtlEngine(Engine.SPARK)" name="EtlEngineRadio">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.spark' | translate }}</span>
                                    </label>
                                </div>
                            </div>
                            <!-- //setting edit -->
                            <a href="javascript:" class="pb-btn-setting" (click)="toggleAdvancedSettingBtn()">Advanced setting</a>
                        </div>
                        <!-- //box setting -->

                        <div class="pb-setting-sub pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.file-format' | translate}}</div>
                                <div class="pb-form-edit" style="width:600px;">
                                    <!-- select -->
                                    <div class="pb-component-selectbox is-value" (clickOutside)="isHiveEmbeddedFormatShow =false">
                                        <span class="pb-txt-selectbox" *ngIf="snapshot.hiveFileFormat == null">No data</span>
                                        <span class="pb-txt-selectbox" (click)="isHiveEmbeddedFormatShow = true" *ngIf="snapshot.hiveFileFormat != null">{{snapshot.hiveFileFormat}}</span>
                                        <!-- popup -->
                                        <div class="pb-select-popup" *ngIf="isHiveEmbeddedFormatShow" [style.display]="'block'" style="z-index:1001;">
                                            <ul class="pb-list-selectbox">
                                                <li *ngFor="let hiveformatitem  of hiveEmbeddedFormat">
                                                    <a href="javascript:;" (click)="onSelected(hiveformatitem,'format')">
                                                        {{hiveformatitem.label}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- // select -->
                                </div>
                            </div>
                            <!-- //setting edit -->
                        </div>


                        <div class="pb-setting-sub pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.compression' | translate}}</div>
                                <div class="pb-form-edit" style="width:600px;">
                                    <!-- select -->
                                    <div class="pb-component-selectbox is-value" (clickOutside)="isCompressionTypeShow =false">
                                        <span class="pb-txt-selectbox" *ngIf="snapshot.hiveFileCompression == null">No data</span>
                                        <span class="pb-txt-selectbox" (click)="isCompressionTypeShow = true" *ngIf="snapshot.hiveFileCompression != null">{{snapshot.hiveFileCompression}}</span>
                                        <!-- popup -->
                                        <div class="pb-select-popup" *ngIf="isCompressionTypeShow" [style.display]="'block'" style="z-index:1001;">
                                            <ul class="pb-list-selectbox">
                                                <li *ngFor="let compression  of compressionType">
                                                    <a href="javascript:;" (click)="onSelected(compression,'compression')">
                                                        {{compression.label}}

                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- // select -->
                                </div>

                            </div>
                            <!-- //setting edit -->
                        </div>




                        <div class="pb-setting-sub pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.overwrite-method' | translate}}</div>
                                <div class="pb-form-edit" style="width:600px;">
                                    <!-- select -->
                                    <div class="pb-component-selectbox is-value" (clickOutside)="isOverwriteMethodShow =false">
                                        <span class="pb-txt-selectbox" *ngIf="snapshot.hiveFileCompression == null">No data</span>
                                        <span class="pb-txt-selectbox" (click)="isOverwriteMethodShow = true" *ngIf="snapshot.appendMode != null">{{snapshot.appendMode}}</span>
                                        <!-- popup -->
                                        <div class="pb-select-popup" *ngIf="isOverwriteMethodShow" [style.display]="'block'" style="z-index:1001;">
                                            <ul class="pb-list-selectbox">
                                                <li *ngFor="let method  of overwriteMethod">
                                                    <a href="javascript:;" (click)="onSelected(method,'mode')">
                                                        {{method.label}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- // select -->
                                </div>

                            </div>
                            <!-- //setting edit -->
                        </div>



                        <div class="pb-setting-sub pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.partition-keys' | translate}}</div>
                                <div class="pb-form-edit" style="width:600px;">
                                    <!-- select -->
                                    <div class="pb-component-selectbox is-value" (clickOutside)="isFieldsShow =false">
                                        <span class="pb-txt-selectbox" (click)="isFieldsShow = true">{{getPartitionSelectedInfo()}}</span>
                                        <!-- popup -->
                                        <div class="pb-select-popup" *ngIf="isFieldsShow" [style.display]="'block'" style="z-index:1001;">
                                            <ul class="pb-list-selectbox">
                                                <li *ngFor="let field  of fields; ">
                                                    <a href="javascript:;" (click)="onPartitionSelected(field)">
                                                        <span style="font-weight: bold" *ngIf="getPartitionSelectedStyle(field) == true">{{field.name}}</span>
                                                        <span *ngIf="getPartitionSelectedStyle(field) == false">{{field.name}}</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- // select -->

                                </div>

                            </div>
                            <!-- //setting edit -->
                        </div>
                    </div>



                    <!--//upload -->


            </div>

        </div>
        <!-- //contents -->
        <div class="pb-popup-bottom ">
            <a href="javascript:" class="pb-component-btn-pop type-line" (click)="close()">CANCEL</a>
            <a href="javascript:" class="pb-component-btn-pop type-bg" (click)="complete()">DONE</a>
        </div>
    </div>
    <!-- //box popup -->
</div>