<div class="pb-layout-popup" *ngIf="datasetId !=null">
    <!-- box popup -->
    <div class="pb-box-popup">
        <a href="javascript:;" class="pb-btn-pop-close" (click)="close()"></a>

        <!-- top -->
        <div class="pb-popup-top pb-clear">
            <div class="pb-txt-title">CREATE DATA RESULT</div>

        </div>
        <!-- //top -->
        <!-- contents -->
        <div class="pb-popup-contents ">
            <div class="pb-wrap-connect type-connect">

                <!-- upload -->
                <div class="pb-wrap-upload type-result">
                    <div class="pb-form-create type-result">
                        <div class="pb-create-label">Result Name</div>
                        <div class="pb-form-edit">
                            <input type="text" class="pb-component-input" placeholder="{{ 'msg.dp.ui.ss-name' | translate }}" [(ngModel)]="snapshot.ssName" maxlength="50"
                                   (keyup)="changeSSUri()"
                                   (keydown)="ssNameKeyDown()">
                            <span class="pb-form-error" *ngIf="showNameError">{{'msg.storage.ui.required' | translate}}</span>
                        </div>
                    </div>


                    <div class="pb-form-create type-result">
                        <div class="pb-create-label">Result Type</div>
                        <div class="pb-form-edit">
                            <label class="pb-compomnent-radio">
                                <input type="radio" value="{{SsType.URI}}" [(ngModel)]="snapshot.ssType" (change)="changeSsType(SsType.URI)" name="snapshotFormatRadio">
                                <i></i>
                                <span class="pb-txt-radio">{{'msg.dp.ui.file-system' | translate }}</span>
                            </label>
                            <label class="pb-compomnent-radio">
                                <input type="radio" value="{{SsType.DATABASE}}" [(ngModel)]="snapshot.ssType" (change)="changeSsType(SsType.DATABASE)" name="snapshotFormatRadio">
                                <i></i>

                                <span class="pb-txt-radio">{{'msg.dp.th.db-type' | translate }}</span>
                            </label>
                        </div>
                    </div>


                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">{{'msg.dp.ui.location' | translate }}</div>
                        <div class="pb-form-edit">
                            <label class="pb-compomnent-radio" *ngFor="let location of fileLocations;let idx = index">
                                <input type="radio" name="fileLocationRadio" (click)="onSelected(location,'location')" [checked]="idx == locationSelectedIndex">
                                <i></i>
                                <span class="pb-txt-radio">{{location.label}}</span>
                            </label>
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">File format</div>
                        <div class="pb-form-edit">
                            <label class="pb-compomnent-radio" *ngFor="let formatitem  of fileFormat">
                                <input type="radio" name="fileFormatRadio" (click)="onSelected(formatitem,'format')" value="{{formatitem.value}}" [(ngModel)]="uriFileFormat">
                                <i></i>
                                <span class="pb-txt-radio">{{formatitem.label}}</span>
                            </label>
                        </div>
                    </div>

                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-create-label">{{ 'msg.dp.ui.file-url' | translate }}</div>
                        <div class="pb-form-edit">
                            <input type="text" class="pb-component-input"
                                   [(ngModel)]="snapshot.storedUri"
                                   (ngModelChange)="onChangeStoredUri($event)"
                                   (keydown)="fileUriKeyDown()">
                            <span class="pb-form-error" *ngIf="showFileURLError">{{'msg.storage.ui.required' | translate}}</span>
                        </div>
                    </div>




                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">Data Connection</div>
                        <div class="pb-form-edit">
                            <div class="pb-component-selectbox is-value" (clickOutside)="isConnectionListShow =false">
                                <span class="pb-txt-selectbox" *ngIf="connectionList.length == 0 || selectedConnection == null">
                                    No data
                                </span>

                                <span class="pb-txt-selectbox" (click)="isConnectionListShow = true" *ngIf="connectionList.length > 0 && selectedConnection !== null">
                                    {{selectedConnection.name}}
                                </span>

                                <span class="pb-form-error" *ngIf="showDataConnectionError">{{'msg.storage.ui.required' | translate}}</span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isConnectionListShow" [style.display]="'block'">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let connection of connectionList">
                                            <a href="javascript:;" (click)="onSelected(connection,'connection')">
                                                {{connection.name}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>




                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">Database</div>
                        <div class="pb-form-edit">
                            <div class="pb-component-selectbox is-value" (clickOutside)="isDatabaseListShow =false">

                                <span class="pb-txt-selectbox" (click)="isDatabaseListShow = true" *ngIf="databaseList !== null && databaseList.length > 0">
                                    <span *ngIf="datasetJdbc.tableInfo.databaseName == null || datasetJdbc.tableInfo.databaseName  == undefined">{{'msg.dp.ui.sel.db' | translate}}</span>
                                    <span *ngIf="datasetJdbc.tableInfo.databaseName !== null && datasetJdbc.tableInfo.databaseName  !== undefined">{{datasetJdbc.tableInfo.databaseName}}</span>
                                </span>

                                <span class="pb-txt-selectbox" *ngIf="databaseList === null || databaseList.length == 0">{{'msg.dp.ui.sel.db' | translate}}</span>
                                <span class="pb-form-error" *ngIf="showDatabaseError">{{'msg.storage.ui.required' | translate}}</span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isDatabaseListShow" [style.display]="'block'">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let database of databaseList">
                                            <a href="javascript:;" (click)="onSelected(database,'database')">
                                                {{database.name}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>


                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">Table</div>
                        <div class="pb-form-edit">
                            <div class="pb-component-selectbox is-value" (clickOutside)="isSchemaListShow =false">
                                <span class="pb-txt-selectbox" (click)="isSchemaListShow = true" *ngIf="schemaList !== null && schemaList.length > 0">
                                    <span *ngIf="datasetJdbc.tableInfo.tableName == null || datasetJdbc.tableInfo.tableName  == undefined">{{'msg.storage.ui.dsource.create.choose-table' | translate}}</span>
                                    <span *ngIf="datasetJdbc.tableInfo.tableName !== null && datasetJdbc.tableInfo.tableName  !== undefined">{{datasetJdbc.tableInfo.tableName}}</span>
                                </span>

                                <span class="pb-txt-selectbox" *ngIf="schemaList === null || schemaList.length == 0">{{'msg.storage.ui.dsource.create.choose-table' | translate}}</span>
                                <span class="pb-form-error" *ngIf="showTableLError">{{'msg.storage.ui.required' | translate}}</span>

                                <!-- popup -->
                                <div class="pb-select-popup" *ngIf="isSchemaListShow" [style.display]="'block'">
                                    <ul class="pb-list-selectbox">
                                        <li *ngFor="let schema of schemaList" (click)="onSelected(schema,'table')">
                                            <a href="javascript:;">
                                                {{schema.name}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- //popup -->
                            </div>
                            <!-- //selectbox -->
                        </div>
                    </div>


                    <div class="pb-form-create type-result" *ngIf="snapshot.ssType && snapshot.ssType === SsType.DATABASE">
                        <div class="pb-create-label">{{'msg.dp.th.overwrite-method' | translate }}</div>
                        <div class="pb-form-edit">
                            <label class="pb-compomnent-radio" *ngFor="let overwmethod of overwriteMethod;">
                                <input type="radio" name="overwriteMethodRadio" value="{{overwmethod.value}}" [ngModel]="snapshot.appendMode">
                                <i></i>
                                <span class="pb-txt-radio">{{overwmethod.label}}</span>
                            </label>
                        </div>
                    </div>



                    <!--is-selected-->
                    <div class="pb-box-setting" [ngClass]="{ 'is-selected' : isAdvancedPrefOpen }" *ngIf="snapshot.ssType && snapshot.ssType === SsType.URI">
                        <div class="pb-box-fold pb-clear">
                            <!-- setting edit -->
                            <div class="pb-setting-edit" *ngIf="isAdvancedPrefOpen">
                                <div class="pb-edit-label">{{'msg.dp.th.ss.etl-engine' | translate}}</div>
                                <div class="pb-form-edit type-radio" style="width:600px;">
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" (change)="changeEtlEngine(Engine.EMBEDDED)" name="EtlEngineRadio" [checked]="snapshot.engine == Engine.EMBEDDED">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.embedded' | translate }}</span>
                                    </label>
                                    <label class="pb-compomnent-radio">
                                        <input type="radio" [disabled]="false===isSparkEnabled()" (change)="changeEtlEngine(Engine.SPARK)" name="EtlEngineRadio" [checked]="snapshot.engine == Engine.SPARK">
                                        <i></i>
                                        <span class="pb-txt-radio">{{'msg.dp.th.ss.etl-engine.spark' | translate }}</span>
                                    </label>
                                </div>
                            </div>
                            <!-- //setting edit -->
                            <a href="javascript:" class="pb-btn-setting" (click)="toggleAdvancedSettingBtn()">Advanced setting</a>
                        </div>
                        <!-- //box setting -->
                    </div>
                    <!--//upload -->
                </div>
            </div>

        </div>
        <!-- //contents -->
        <div class="pb-popup-bottom ">
            <a href="javascript:" class="pb-component-btn-pop type-line" (click)="close()">CANCEL</a>
            <a href="javascript:" class="pb-component-btn-pop type-bg" (click)="complete()">DONE</a>
        </div>
    </div>
    <!-- //box popup -->
</div>