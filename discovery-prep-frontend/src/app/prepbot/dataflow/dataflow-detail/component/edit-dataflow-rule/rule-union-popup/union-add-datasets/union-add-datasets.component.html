<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="pb-layout-popup">
  <!-- box popup -->
  <div class="pb-box-popup">
    <a href="javascript:" class="pb-btn-pop-close" (click)="close()"></a>
    <!-- top -->
    <div class="pb-popup-top pb-clear">
      <div class="pb-txt-title">{{'msg.dp.ui.union.choose.ds' | translate}}</div>

    </div>
    <!-- //top -->
    <!-- contents -->
    <div class="pb-popup-contents ">
      <div class="pb-wrap-connect type-connect">
        <!-- data grid -->
        <div class="pb-wrap-data-grid">
          <!-- grid top -->
          <div class="pb-ui-grid-top">
            <!--
                focus 일때 type-focus 추가
            -->
            <div class="pb-component-search type-focus ">
              <input type="text" placeholder="{{'msg.dp.ui.ds.search.description' | translate}}"
                     (keypress)="onKeyPress($event)" [(ngModel)]="searchText">
              <a href="javascript:" class="pb-btn-delete" *ngIf="searchText" (click)="refreshSearch()"></a>
            </div>
          </div>
          <!-- //grid top -->
          <div class="pb-wrap-table">
            <table class="pb-component-table">
              <colgroup>
                <col width="51px">
                <col width="*">
                <col width="20%">
                <col width="20%">
              </colgroup>
              <thead>
              <tr>
                <th class="pb-txt-center">
                  <label class="ddp-ui-checkbox" (click)="checkAll();">
                    <input type="checkbox" class="ddp-checkbox-form" [checked]="isAllChecked()" [disabled]="isCheckAllDisabled()">
                    <i class="ddp-icon-checkbox"></i>
                  </label>
                </th>
                <th (click)="sortList('dsName')">
                  {{'msg.comm.menu.manage.prep.set' | translate}}
                  <em class="ddp-icon-array-default2" *ngIf="selectedContentSort.key !== 'dsName' || selectedContentSort.sort === 'default'"></em>
                  <em class="ddp-icon-array-asc2" *ngIf="selectedContentSort.key === 'dsName' && selectedContentSort.sort === 'asc'"></em>
                  <em class="ddp-icon-array-des2" *ngIf="selectedContentSort.key === 'dsName' && selectedContentSort.sort === 'desc'"></em>
                </th>
                <th>
                  {{'msg.comm.th.type' | translate}}
                </th>
                <th (click)="sortList('modifiedTime')">
                  {{'msg.comm.ui.list.last' | translate}}
                  <em class="ddp-icon-array-default2" *ngIf="selectedContentSort.key !== 'modifiedTime' || selectedContentSort.sort === 'default'"></em>
                  <em class="ddp-icon-array-asc2" *ngIf="selectedContentSort.key === 'modifiedTime' && selectedContentSort.sort === 'asc'"></em>
                  <em class="ddp-icon-array-des2" *ngIf="selectedContentSort.key === 'modifiedTime' && selectedContentSort.sort === 'desc'"></em>
                </th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let dsItem of datasets">
                <td class="pb-txt-center">
                  <label class="ddp-ui-checkbox" (click)="check(dsItem);">
                    <input type="checkbox" [checked]="dsItem.selected && !dsItem.origin" [disabled]="dsItem.origin">
                    <i class="ddp-icon-checkbox"></i>
                  </label>
                </td>
                <td>
                  <div class="ddp-txt-long" title="{{dsItem.dsName}}" *ngIf="!dsItem.dsDesc; else yesDesc">
                    {{dsItem.dsName}}
                  </div>
                  <ng-template #yesDesc>
                    <div class=" ddp-txt-long" title="{{dsItem.dsName}} - {{dsItem.dsDesc}}">
                      {{dsItem.dsName}}
                      <span class="ddp-txt-colortype">- {{dsItem.dsDesc}}</span>
                    </div>
                  </ng-template>
                </td>
                <td>
                  <span *ngIf="dsItem.dsType.toString() === 'IMPORTED'">{{'msg.dp.ui.imported' | translate}}({{dsItem.importType}})</span>
                  <span *ngIf="dsItem.dsType.toString() === 'WRANGLED'">{{'msg.dp.ui.wrangled' | translate}}</span>
                </td>
                <td>
                  {{dsItem.modifiedTime | mdate:'YYYY-MM-DD HH:mm'}}
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- //data grid -->
      </div>
    </div>
    <!-- //contents -->
    <div class="pb-popup-bottom ">
      <a href="javascript:" class="pb-component-btn-pop type-bg" (click)="close()">{{'msg.comm.btn.close' | translate}}</a>
      <a href="javascript:" class="pb-component-btn-pop type-line"
         [ngClass]="{'ddp-disabled': isAddEnabled()}"
         (click)="addDatasets()">{{'msg.dp.btn.union.add' | translate}}</a>
    </div>
  </div>
  <!-- //box popup -->
</div>
